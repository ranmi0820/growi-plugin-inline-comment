{"version":3,"file":"get-status.cjs","sources":["../../../../../src/v4/server/utils/template/get-status.ts"],"sourcesContent":["import fs, { readFileSync } from 'node:fs';\nimport path from 'node:path';\nimport { promisify } from 'node:util';\n\nconst statAsync = promisify(fs.stat);\n\ntype TemplateDirStatus = {\n  isTemplateExists: boolean;\n  meta?: { [key: string]: string };\n};\n\nexport async function getStatus(tplDir: string): Promise<TemplateDirStatus> {\n  const markdownPath = path.resolve(tplDir, 'template.md');\n  const statForMarkdown = await statAsync(markdownPath);\n  const isTemplateExists = statForMarkdown.isFile();\n\n  const metaDataPath = path.resolve(tplDir, 'meta.json');\n  const statForMetaDataFile = await statAsync(metaDataPath);\n  const isMetaDataFileExists = statForMetaDataFile.isFile();\n\n  const result: TemplateDirStatus = {\n    isTemplateExists,\n    meta: isMetaDataFileExists\n      ? JSON.parse(readFileSync(metaDataPath, 'utf-8'))\n      : undefined,\n  };\n\n  return result;\n}\n"],"names":["statAsync","promisify","fs","getStatus","tplDir","markdownPath","path","isTemplateExists","metaDataPath","isMetaDataFileExists","readFileSync"],"mappings":"yJAIMA,EAAYC,EAAAA,UAAUC,EAAG,IAAI,EAOnC,eAAsBC,EAAUC,EAA4C,CAC1E,MAAMC,EAAeC,EAAK,QAAQF,EAAQ,aAAa,EAEjDG,GADkB,MAAMP,EAAUK,CAAY,GACX,OAAO,EAE1CG,EAAeF,EAAK,QAAQF,EAAQ,WAAW,EAE/CK,GADsB,MAAMT,EAAUQ,CAAY,GACP,OAAO,EASjD,MAP2B,CAChC,iBAAAD,EACA,KAAME,EACF,KAAK,MAAMC,EAAAA,aAAaF,EAAc,OAAO,CAAC,EAC9C,MACN,CAGF"}