import { GrowiPluginValidationError as r } from "../../../../model/growi-plugin-validation-error.js";
import { importPackageJson as c } from "./import-package-json.js";
const u = (s, o) => {
  const a = c(s), { growiPlugin: i } = a, e = {
    projectDirRoot: s,
    schemaVersion: Number.NaN,
    growiPlugin: i
  };
  if (i == null)
    throw new r(
      "The package.json does not have 'growiPlugin' directive.",
      e
    );
  const n = Number(i.schemaVersion);
  if (e.schemaVersion = n, Number.isNaN(n) || n < 4)
    throw new r(
      "The growiPlugin directive must have a valid 'schemaVersion' directive.",
      e
    );
  const t = i.types;
  if (e.actualPluginTypes = t, t == null)
    throw new r(
      "The growiPlugin directive does not have 'types' directive.",
      e
    );
  if (o != null && (e.expectedPluginType = o, !t.includes(o)))
    throw new r(
      "The growiPlugin directive does not have expected plugin type in 'types' directive.",
      e
    );
  return e;
};
export {
  u as validateGrowiDirective
};
//# sourceMappingURL=validate-growi-plugin-directive.js.map
