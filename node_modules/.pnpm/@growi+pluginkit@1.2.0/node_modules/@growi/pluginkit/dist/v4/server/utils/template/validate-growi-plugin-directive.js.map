{"version":3,"file":"validate-growi-plugin-directive.js","sources":["../../../../../src/v4/server/utils/template/validate-growi-plugin-directive.ts"],"sourcesContent":["import { GrowiPluginType } from '@growi/core';\n\nimport type {\n  GrowiPluginValidationData,\n  GrowiTemplatePluginValidationData,\n} from '../../../../model';\nimport { GrowiPluginValidationError } from '../../../../model';\nimport { validateGrowiDirective } from '../common';\n\n/**\n * An utility for template plugin which wrap 'validateGrowiDirective' of './common' module\n * @param projectDirRoot\n */\nexport const validateTemplatePluginGrowiDirective = (\n  projectDirRoot: string,\n): GrowiTemplatePluginValidationData => {\n  const data = validateGrowiDirective(projectDirRoot, GrowiPluginType.Template);\n\n  const { growiPlugin } = data;\n\n  // check supporting locales\n  const supportingLocales: string[] | undefined = growiPlugin.locales;\n  if (supportingLocales == null || supportingLocales.length === 0) {\n    throw new GrowiPluginValidationError<\n      GrowiPluginValidationData & { supportingLocales?: string[] }\n    >(\n      \"Template plugin must have 'supportingLocales' and that must have one or more locales\",\n      {\n        ...data,\n        supportingLocales,\n      },\n    );\n  }\n\n  return {\n    ...data,\n    supportingLocales,\n  };\n};\n"],"names":["validateTemplatePluginGrowiDirective","projectDirRoot","data","validateGrowiDirective","GrowiPluginType","growiPlugin","supportingLocales","GrowiPluginValidationError"],"mappings":";;;AAaa,MAAAA,IAAuC,CAClDC,MACsC;AACtC,QAAMC,IAAOC,EAAuBF,GAAgBG,EAAgB,QAAQ,GAEtE,EAAE,aAAAC,MAAgBH,GAGlBI,IAA0CD,EAAY;AAC5D,MAAIC,KAAqB,QAAQA,EAAkB,WAAW;AAC5D,UAAM,IAAIC;AAAA,MAGR;AAAA,MACA;AAAA,QACE,GAAGL;AAAA,QACH,mBAAAI;AAAA,MAAA;AAAA,IAEJ;AAGK,SAAA;AAAA,IACL,GAAGJ;AAAA,IACH,mBAAAI;AAAA,EACF;AACF;"}