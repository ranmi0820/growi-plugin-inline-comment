{"version":3,"file":"get-status.js","sources":["../../../../../src/v4/server/utils/template/get-status.ts"],"sourcesContent":["import fs, { readFileSync } from 'node:fs';\nimport path from 'node:path';\nimport { promisify } from 'node:util';\n\nconst statAsync = promisify(fs.stat);\n\ntype TemplateDirStatus = {\n  isTemplateExists: boolean;\n  meta?: { [key: string]: string };\n};\n\nexport async function getStatus(tplDir: string): Promise<TemplateDirStatus> {\n  const markdownPath = path.resolve(tplDir, 'template.md');\n  const statForMarkdown = await statAsync(markdownPath);\n  const isTemplateExists = statForMarkdown.isFile();\n\n  const metaDataPath = path.resolve(tplDir, 'meta.json');\n  const statForMetaDataFile = await statAsync(metaDataPath);\n  const isMetaDataFileExists = statForMetaDataFile.isFile();\n\n  const result: TemplateDirStatus = {\n    isTemplateExists,\n    meta: isMetaDataFileExists\n      ? JSON.parse(readFileSync(metaDataPath, 'utf-8'))\n      : undefined,\n  };\n\n  return result;\n}\n"],"names":["statAsync","promisify","fs","getStatus","tplDir","markdownPath","path","isTemplateExists","metaDataPath","isMetaDataFileExists","readFileSync"],"mappings":";;;AAIA,MAAMA,IAAYC,EAAUC,EAAG,IAAI;AAOnC,eAAsBC,EAAUC,GAA4C;AAC1E,QAAMC,IAAeC,EAAK,QAAQF,GAAQ,aAAa,GAEjDG,KADkB,MAAMP,EAAUK,CAAY,GACX,OAAO,GAE1CG,IAAeF,EAAK,QAAQF,GAAQ,WAAW,GAE/CK,KADsB,MAAMT,EAAUQ,CAAY,GACP,OAAO;AASjD,SAP2B;AAAA,IAChC,kBAAAD;AAAA,IACA,MAAME,IACF,KAAK,MAAMC,EAAaF,GAAc,OAAO,CAAC,IAC9C;AAAA,EACN;AAGF;"}