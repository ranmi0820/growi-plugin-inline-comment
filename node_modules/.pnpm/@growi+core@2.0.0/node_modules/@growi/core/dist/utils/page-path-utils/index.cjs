"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("escape-string-regexp"),P=require("../objectid-utils.cjs"),i=require("../path-utils.cjs"),m=require("./is-top-page.cjs"),d=require("./generate-children-regexp.cjs"),o=m.isTopPage,c=e=>e==="/user",f=e=>{const t=e.substring(1);return P.isValidObjectId(t)},l=e=>!!e.match(/^\/user\/[^/]+$/),u=e=>c(e)||l(e),$=e=>!o(e)&&!u(e),T=e=>!!e.match(/^\/user\/.*?$/),E=e=>e==="/trash",S=e=>!!e.match(/^\/trash(\/.*)?$/),w=e=>!!e.match(/^\/share(\/.*)?$/),v=[/\^|\$|\*|\+|#|<|>|%|\?/,/^\/-\/.*/,/^\/_r\/.*/,/^\/_apix?(\/.*)?/,/^\/?https?:\/\/.+$/,/\/{2,}/,/\s+\/\s+/,/.+\/edit$/,/.+\.md$/,/^(\.\.)$/,/(\/\.\.)\/?/,/\\/,/^\/(_search|_private-legacy-pages)(\/.*|$)/,/^\/(installer|register|login|logout|admin|me|files|trash|paste|comments|tags|share|attachment)(\/.*|$)/,/^\/user(?:\/[^/]+)?$/,/^(\/.+){130,}$/],h=e=>!v.some(t=>e.match(t)),A=e=>(e==null?void 0:e.username)==null?"":`/user/${e.username}`,b=(e,t,r)=>{if(t==null)throw new Error("Please input the new page path");const a=new RegExp(`^${s(e)}`,"i");return r.replace(a,t)},U=e=>{if(e!=null)return e.replace(/ /g,"%20").replace(/\u3000/g,"%E3%80%80")},x=(...e)=>{const t=[...e].join("/");if(!h(t))throw new Error("Invalid characters on path");try{return`${new URL(t,"https://dummy").pathname}#edit`}catch{throw new Error("Invalid path format")}},R=e=>{const t=Array.from(new Set(e));return t.filter(r=>!(t.filter(n=>new RegExp(`^${n}\\/.+`,"i").test(r)).length>0))},y=e=>e.filter(t=>!e.some(a=>new RegExp(`^${a.path}\\/.+`,"i").test(t.path))),D=(e,t)=>{if(e===t)return!0;const r=i.addTrailingSlash(e),a=i.addTrailingSlash(t),n=new RegExp(`^${s(r)}`,"i"),p=new RegExp(`^${s(a)}`,"i");return!!(n.test(t)||p.test(e))},g=(e,t)=>{if(e===t)return!0;const r=i.addTrailingSlash(e);return!!new RegExp(`^${s(r)}`,"i").test(t)},O=(e,t)=>!g(e,t),q=e=>e.includes("/"),C=e=>{let t=null;const r=e.match(/^\/user\/([^/]+)\/?/);return r&&(t=r[1]),t},j=e=>/^(?:\/[^/*?[\]{}]+)*\/\*$/.test(e);exports.generateChildrenRegExp=d.generateChildrenRegExp;exports.canMoveByPath=O;exports.convertToNewAffiliationPath=b;exports.encodeSpaces=U;exports.generateEditorPath=x;exports.getUsernameByPath=C;exports.hasSlash=q;exports.isCreatablePage=h;exports.isEitherOfPathAreaOverlap=D;exports.isGlobPatternPath=j;exports.isMovablePage=$;exports.isPathAreaOverlap=g;exports.isPermalink=f;exports.isSharedPage=w;exports.isTopPage=o;exports.isTrashPage=S;exports.isTrashTopPage=E;exports.isUserPage=T;exports.isUsersHomepage=l;exports.isUsersProtectedPages=u;exports.isUsersTopPage=c;exports.omitDuplicateAreaPageFromPages=y;exports.omitDuplicateAreaPathFromPaths=R;exports.userHomepagePath=A;
//# sourceMappingURL=index.cjs.map
