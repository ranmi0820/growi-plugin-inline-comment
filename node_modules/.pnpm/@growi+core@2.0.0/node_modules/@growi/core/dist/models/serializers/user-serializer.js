import { Document as r } from "mongoose";
import { isRef as c, isPopulated as s } from "../../interfaces/common.js";
const l = (t) => {
  const i = t instanceof r ? t.toObject() : t, {
    // biome-ignore lint/correctness/noUnusedVariables: ignore
    password: a,
    // biome-ignore lint/correctness/noUnusedVariables: ignore
    apiToken: m,
    email: o,
    ...n
  } = i, e = n;
  return e.isEmailPublished && (e.email = o), e;
};
function u(t) {
  return t == null || c(t) && !s(t) ? t : l(t);
}
export {
  l as omitInsecureAttributes,
  u as serializeUserSecurely
};
//# sourceMappingURL=user-serializer.js.map
